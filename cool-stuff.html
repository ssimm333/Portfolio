<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Simulations - Portfolio</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="style.css?v=4">
    <!-- MathJax for rendering equations -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <style>
        .pendulum-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            padding: 20px;
            width: 100%;
            overflow: hidden;
        }

        canvas {
            background: var(--bg-color) !important;
            border: 1px solid var(--border-color) !important;
            border-radius: 4px;
            box-shadow: none;
            cursor: grab;
            max-width: 100%;
            height: auto;
        }

        canvas:active {
            cursor: grabbing;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            align-items: center;
            background: transparent;
            padding: 20px;
            border-top: 1px solid var(--border-color);
            margin-top: 20px;
            width: 100%;
            max-width: 800px;
        }

        @media (max-width: 768px) {
            .pendulum-container {
                padding: 12px 0;
                gap: 12px;
            }

            .controls {
                padding: 12px 8px;
                gap: 12px;
            }

            .control-group input[type="range"] {
                width: 120px;
            }

            .math-block {
                padding: 14px;
                font-size: 0.9rem;
            }
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .control-group label {
            font-size: 0.9em;
            color: var(--text-color);
            font-weight: 700;
            text-transform: uppercase;
        }

        .control-group input[type="range"] {
            width: 150px;
            cursor: pointer;
            accent-color: var(--accent-color);
        }

        .control-group input[type="number"] {
            width: 80px;
            padding: 5px;
            border-radius: 0;
            border: 1px solid var(--border-color);
            background: var(--card-bg);
            color: var(--text-color);
            font-size: 0.9em;
        }

        button {
            padding: 10px 20px;
            background: var(--card-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 0;
            cursor: pointer;
            font-weight: 700;
            text-transform: uppercase;
            transition: all 0.2s;
        }

        button:hover {
            background: var(--accent-color);
            border-color: var(--accent-color);
            color: #fff;
            /* Always white on red accent */
            transform: none;
            box-shadow: none;
        }

        button:active {
            transform: translateY(1px);
        }

        .info-text {
            text-align: left;
            color: var(--text-color);
            font-size: 0.9em;
            max-width: 600px;
        }

        .trace-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .trace-toggle input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--accent-color);
        }

        .collapsible-wrapper {
            display: grid;
            grid-template-rows: 0fr;
            transition: grid-template-rows 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .collapsible.active .collapsible-wrapper {
            grid-template-rows: 1fr;
        }

        .collapsible-content {
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.4s ease-out;
        }

        .collapsible.active .collapsible-content {
            opacity: 1;
        }

        .collapsible-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding-bottom: 10px;
            border-bottom: 4px solid var(--border-color);
            margin-bottom: 0 !important;
        }

        .collapsible-header:hover h2 {
            color: var(--accent-color);
        }

        .collapsible-header h2 {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
            transition: color 0.2s;
            color: var(--text-color);
        }

        .toggle-icon {
            width: 12px;
            height: 12px;
            border-right: 3px solid var(--text-color);
            border-bottom: 3px solid var(--text-color);
            transform: rotate(45deg);
            transition: transform 0.3s ease;
            margin-right: 10px;
        }

        .collapsible.active .toggle-icon {
            transform: rotate(-135deg);
            border-color: var(--accent-color);
        }

        .math-block {
            margin-top: 30px;
            padding: 20px;
            background: var(--card-bg);
            border-left: 4px solid var(--accent-color);
            font-family: 'Georgia', serif;
            color: var(--text-color);
            /* Add a border in light mode for better definition if needed, 
                but card-bg change might be enough */
            border: 1px solid var(--border-color);
            border-left-width: 4px;
        }

        .math-title {
            font-family: 'Helvetica Neue', 'Arial', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .equation {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            font-size: 1.2rem;
            text-align: center;
            margin: 20px 0;
            color: var(--text-color);
        }

        .variable {
            font-weight: bold;
            font-family: 'Times New Roman', serif;
            color: var(--text-color);
        }
        .preload-screen {
            position: fixed;
            inset: 0;
            z-index: 9999;
            background: var(--bg-color);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .preload-screen .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border-color);
            border-top-color: var(--accent-color);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>

<body>
    <div class="preload-screen" id="preloader">
        <div class="spinner"></div>
    </div>

    <div class="grid-container">



        <header class="top-header">
            <nav class="top-nav">
                <ul>
                    <li><a href="index.html" aria-label="Home"><svg class="home-icon" xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24">
                                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                            </svg></a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="cool-stuff.html">Interactive Simulations</a></li>
                </ul>
                <div class="header-actions">
                    <a href="assets/resume.pdf" download class="cv-button">CV &#8595;</a>
                    <button id="theme-toggle" title="Toggle Theme"></button>
                </div>
            </nav>
        </header>

        <main class="main-content">
            <section class="section collapsible active reveal">
                <div class="collapsible-header" onclick="toggleSection(this.parentElement)">
                    <h2>Interactive Double Pendulum</h2>
                    <span class="toggle-icon"></span>
                </div>
                <div class="collapsible-wrapper">
                    <div class="collapsible-content">
                        <div class="content-block" style="margin-top: 20px;">
                            <p class="info-text">
                                A chaotic double pendulum simulation. Drag the pendulum bobs to set initial positions,
                                or use the controls below to adjust parameters. Watch as tiny changes in initial
                                conditions
                                lead to dramatically different outcomes - a beautiful demonstration of chaos theory!
                            </p>
                        </div>

                        <div class="pendulum-container">
                            <canvas id="pendulumCanvas" width="800" height="600"></canvas>

                            <div class="controls">
                                <div class="control-group">
                                    <label for="mass1">Mass 1 (kg):</label>
                                    <input type="number" id="mass1" min="1" max="50" value="10" step="1">
                                </div>

                                <div class="control-group">
                                    <label for="mass2">Mass 2 (kg):</label>
                                    <input type="number" id="mass2" min="1" max="50" value="10" step="1">
                                </div>

                                <div class="control-group">
                                    <label for="length1">Length 1 (m):</label>
                                    <input type="number" id="length1" min="50" max="200" value="150" step="10">
                                </div>

                                <div class="control-group">
                                    <label for="length2">Length 2 (m):</label>
                                    <input type="number" id="length2" min="50" max="200" value="150" step="10">
                                </div>

                                <div class="control-group">
                                    <label for="gravity">Gravity (m/sÂ²):</label>
                                    <input type="number" id="gravity" min="1" max="20" value="9.81" step="0.1">
                                </div>

                                <div class="control-group trace-toggle">
                                    <input type="checkbox" id="showTrace" checked>
                                    <label for="showTrace">Show Trace</label>
                                </div>

                                <button id="resetBtn">Reset</button>
                                <button id="pauseBtn">Pause</button>
                            </div>
                        </div>

                        <div class="math-block">
                            <div class="math-title">The Math Behind It</div>
                            <p>The double pendulum is a classic system in <span class="variable">Lagrangian
                                    Mechanics</span>. Unlike simple physics where we sum forces ($F=ma$), here we look
                                at Energy.</p>

                            <p>We define the <strong>Lagrangian</strong> ($\mathcal{L}$) as the difference between
                                Kinetic Energy ($T$) and Potential Energy ($V$):</p>
                            <div class="equation">
                                $\mathcal{L} = T - V$
                            </div>

                            <p>For this system, the equations of motion are derived using the Euler-Lagrange equation:
                            </p>
                            <div class="equation">
                                $\frac{d}{dt}(\frac{\partial\mathcal{L}}{\partial\dot{\theta}_i}) -
                                \frac{\partial\mathcal{L}}{\partial\theta_i} = 0$
                            </div>

                            <p>This results in two coupled, non-linear second-order differential equations that are
                                solved numerically (using RK4) 60 times a second to create the animation you see above.
                                It is because of these non-linear terms that the system exhibits <strong>chaos</strong>.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section collapsible reveal-scale">
                <div class="collapsible-header" onclick="toggleSection(this.parentElement)">
                    <h2>PID Controller</h2>
                    <span class="toggle-icon"></span>
                </div>
                <div class="collapsible-wrapper">
                    <div class="collapsible-content">
                        <div class="content-block" style="margin-top: 20px;">
                            <p class="info-text">
                                A visual demonstration of a PID controller. Twist the <strong>TARGET</strong> knob (Red)
                                and
                                watch
                                the <strong>OUTPUT</strong> knob (Black) try to follow it. The output knob simulates a
                                physical
                                object
                                with weight and friction. Adjust the P, I, and D parameters to see how they affect the
                                control
                                loop performance.
                            </p>
                        </div>

                        <div class="pendulum-container">
                            <canvas id="pidCanvas" width="800" height="300"></canvas>

                            <div class="controls">
                                <div class="control-group">
                                    <label for="kp">Proportional (Kp): <span id="kp-val">0.5</span></label>
                                    <input type="range" id="kp" min="0" max="5" value="0.5" step="0.1">
                                </div>

                                <div class="control-group">
                                    <label for="ki">Integral (Ki): <span id="ki-val">0.0</span></label>
                                    <input type="range" id="ki" min="0" max="2" value="0.0" step="0.01">
                                </div>

                                <div class="control-group">
                                    <label for="kd">Derivative (Kd): <span id="kd-val">0.1</span></label>
                                    <input type="range" id="kd" min="0" max="2" value="0.1" step="0.01">
                                </div>
                            </div>
                        </div>

                        <div class="math-block">
                            <div class="math-title">The Math Behind It</div>
                            <p>A <strong>PID Controller</strong> calculates an "error" value ($e(t)$) as the difference
                                between your desired Setpoint and the measured Process Variable.</p>

                            <p>The controller attempts to minimize this error by adjusting the input (Torque) using
                                three terms:</p>
                            <div class="equation">
                                $u(t) = K_p e(t) + K_i \int_{0}^{t} e(\tau)d\tau + K_d \frac{de(t)}{dt}$
                            </div>

                            <ul>
                                <li><strong>P (Proportional)</strong>: Depends on the <em>present</em> error. "I'm not
                                    where I want to be, push harder!"</li>
                                <li><strong>I (Integral)</strong>: Depends on the <em>past</em> accumulation of errors.
                                    "I've been off target for a long time, I need to push constantly."</li>
                                <li><strong>D (Derivative)</strong>: Depends on the <em>future</em> rate of change. "I'm
                                    approaching the target too fast, slow down!"</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section collapsible reveal-scale">
                <div class="collapsible-header" onclick="toggleSection(this.parentElement)">
                    <h2>Fourier Series Drawing</h2>
                    <span class="toggle-icon"></span>
                </div>
                <div class="collapsible-wrapper">
                    <div class="collapsible-content">
                        <div class="content-block" style="margin-top: 20px;">
                            <p class="info-text">
                                <strong>Draw anything</strong> in the box below! The computer will calculate the Fourier
                                Series (DFT)
                                of your drawing and reconstruct it using purely rotating circles (<span
                                    class="variable">epicycles</span>).
                            </p>
                            <p class="info-text" style="font-size: 0.9em; opacity: 0.7;">
                                Note: Complex drawings may take a moment to compute.
                            </p>
                        </div>

                        <div class="pendulum-container">
                            <canvas id="fourierCanvas" width="800" height="500"></canvas>
                        </div>

                        <div class="math-block">
                            <div class="math-title">The Math Behind It</div>
                            <p>This demo uses the <strong>Discrete Fourier Transform (DFT)</strong> to convert your
                                time-domain drawing into frequency-domain components.</p>

                            <p>We treat your drawing as a sequence of complex numbers ($x_n$). The DFT formula gives us
                                the amplitude and phase for each rotating circle:</p>
                            <div class="equation">
                                $X_k = \sum_{n=0}^{N-1} x_n \cdot e^{-i \frac{2\pi}{N} kn}$
                            </div>

                            <p>Where:</p>
                            <ul>
                                <li>$x_n$: The $n$-th point of your drawing (Complex Number).</li>
                                <li>$X_k$: The $k$-th frequency component (defines Radius and Angle).</li>
                                <li>$e^{-i\theta}$: Euler's formula describing rotation in the complex plane
                                    ($\cos\theta
                                    - i\sin\theta$).</li>
                            </ul>
                            <p>By summing these rotating vectors, we can approximate <em>any</em> periodic function.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section collapsible reveal-scale">
                <div class="collapsible-header" onclick="toggleSection(this.parentElement)">
                    <h2>Lorenz Attractor</h2>
                    <span class="toggle-icon"></span>
                </div>
                <div class="collapsible-wrapper">
                    <div class="collapsible-content">
                        <div class="content-block" style="margin-top: 20px;">
                            <p class="info-text">
                                The <strong>Lorenz Attractor</strong> is a set of chaotic solutions to the Lorenz
                                system.
                                It resembles a butterfly and is a primary example of how deterministic systems can
                                exhibit unpredictable behavior.
                                <strong>Drag to rotate</strong> the 3D view!
                            </p>
                        </div>

                        <div class="pendulum-container">
                            <canvas id="lorenzCanvas" width="800" height="600"></canvas>

                            <div class="controls">
                                <div class="control-group">
                                    <label for="sigma">Sigma ($\sigma$): <span id="sigma-val">10</span></label>
                                    <input type="range" id="sigma" min="0" max="50" value="10" step="0.1">
                                </div>

                                <div class="control-group">
                                    <label for="rho">Rho ($\rho$): <span id="rho-val">28</span></label>
                                    <input type="range" id="rho" min="0" max="100" value="28" step="0.1">
                                </div>

                                <div class="control-group">
                                    <label for="beta">Beta ($\beta$): <span id="beta-val">2.67</span></label>
                                    <input type="range" id="beta" min="0" max="10" value="2.67" step="0.01">
                                </div>
                            </div>
                        </div>

                        <div class="math-block">
                            <div class="math-title">The Math Behind It</div>
                            <p>The Lorenz system is a system of three ordinary differential equations originally derived
                                to model atmospheric convection.</p>

                            <div class="equation">
                                $\frac{dx}{dt} = \sigma(y - x)$
                            </div>
                            <div class="equation">
                                $\frac{dy}{dt} = x(\rho - z) - y$
                            </div>
                            <div class="equation">
                                $\frac{dz}{dt} = xy - \beta z$
                            </div>

                            <p>Even though these equations are deterministic (no randomness), the system is extremely
                                sensitive to initial conditions. This effect is popularly known as the <strong>Butterfly
                                    Effect</strong>.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section collapsible reveal-scale">
                <div class="collapsible-header" onclick="toggleSection(this.parentElement)">
                    <h2>Conway's Game of Life</h2>
                    <span class="toggle-icon"></span>
                </div>
                <div class="collapsible-wrapper">
                    <div class="collapsible-content">
                        <div class="content-block" style="margin-top: 20px;">
                            <p class="info-text">
                                The most famous "Zero Player Game". A set of simple rules that creates complex,
                                life-like behaviors.
                                <strong>Click</strong> to revive cells, or use the buttons below.
                            </p>
                        </div>

                        <div class="pendulum-container">
                            <canvas id="golCanvas" width="800" height="500"></canvas>

                            <div class="controls">
                                <button id="gol-run">Run</button>
                                <button id="gol-random">Randomize</button>
                                <button id="gol-clear">Clear</button>
                            </div>
                        </div>

                        <div class="math-block">
                            <div class="math-title">The Rules</div>
                            <p>Every cell interacts with its eight neighbors based on these four rules:</p>
                            <ul>
                                <li><strong>Underpopulation</strong>: Any live cell with fewer than two neighbors dies.
                                </li>
                                <li><strong>Survival</strong>: Any live cell with two or three neighbors lives.</li>
                                <li><strong>Overpopulation</strong>: Any live cell with more than three neighbors dies.
                                </li>
                                <li><strong>Reproduction</strong>: Any dead cell with exactly three neighbors becomes a
                                    live cell.</li>
                            </ul>

                            <p class="equation" style="font-size: 1rem; margin-top: 20px;">
                                Despite these simple rules, the Game of Life is <strong>Turing Complete</strong>.
                            </p>
                        </div>
                    </div>
                </div>
            </section>


        </main>

        <!-- Footer -->
        <footer class="site-footer">
            <span>&copy; 2026 Stanislav Simanovich</span>
            <div class="footer-social">
                <a href="https://www.linkedin.com/in/stanislav-simanovich-474133298" target="_blank" aria-label="LinkedIn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                    </svg>
                </a>
                <a href="https://github.com/ssimm333" target="_blank" aria-label="GitHub">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
            </div>
        </footer>
    </div>

    <script src="theme.js"></script>
    <script src="scroll-reveal.js"></script>
    <script src="pendulum.js"></script>
    <script src="pid.js"></script>
    <script src="fourier.js"></script>
    <script src="lorenz.js"></script>
    <script src="gameoflife.js"></script>
    <script src="page-transitions.js"></script>

    <script>
        function toggleSection(element) {
            // Close all other collapsible sections
            document.querySelectorAll('.collapsible').forEach(sec => {
                if (sec !== element) {
                    sec.classList.remove('active');
                }
            });
            // Toggle clicked section
            element.classList.toggle('active');
        }
    </script>
</body>

</html>