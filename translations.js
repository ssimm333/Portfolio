const translations = {
    en: {
        "title": "Stanislav<br>Simanovich",
        "nav.about": "About",
        "nav.work": "Work",
        "nav.education": "Education",
        "nav.coolstuff": "Interactive Simulations",
        "nav.contact": "Contact",
        "about.title": "About",
        "about.lead": "Hi! I'm Stas. I'm a 20 year old from Ireland.",
        "about.p1": "I’m an engineering student with a strong interest in building systems and understanding how hardware and software interact at a low level.",
        "about.p2": "I enjoy working on hands-on projects, particularly those involving embedded systems, microcontrollers, and problem-solving through testing and iteration. I’m motivated by learning how things work under the hood and applying theory to real-world scenarios.",
        "about.p3": "This website serves as a personal portfolio to document my projects, development, and interests as I continue to build my technical skills.",
        "about.p4": "Outside of technical work, I enjoy staying curious, learning new tools, playing the guitar (7 string) and cooking.",
        "work.title": "Work",
        "work.adi.role": "Data Center and Energy Applications Department",
        "work.adi.list.1": "Test Automation and Analysis",
        "work.adi.list.2": "EDA Schematic and Layout",
        "work.adi.list.3": "EDA Software Plugin Development",
        "work.adi.list.4": "CAD Design",
        "work.conack.role": "General Operative",
        "work.conack.list.1": "Housekeeping",
        "work.conack.list.2": "Delivery of goods",
        "work.conack.list.3": "Painting",
        "work.conack.list.4": "Plumbing",
        "work.conack.list.5": "Bricklaying",
        "edu.title": "Education",
        "edu.ul.role": "3° Year MEng - Digital Mechatronics Engineering",
        "edu.list.1": "Static and Dynamic Mechanics",
        "edu.list.2": "Mechanics of Solids",
        "edu.list.3": "Thermal Dynamics",
        "edu.list.4": "Fluid Dynamics",
        "edu.list.5": "Control Systems",
        "edu.list.6": "Electronics",
        "edu.list.7": "Embedded Systems",
        "edu.list.8": "Mathematics",
        "edu.list.9": "Statistics",
        "edu.list.10": "CAD Design",
        "contact.title": "Contact",
        "credits.overlay": "Credits",
        "maja.dedication": "Dedicated to my lovely girlfriend Maja",
        "maja.photo.desc": "For taking the cool photo.",
        "maja.return": "Return Home",
        "cs.title": "Interactive Simulations - Portfolio",
        "cs.pendulum.title": "Interactive Double Pendulum",
        "cs.pendulum.desc": "A chaotic double pendulum simulation. Drag the pendulum bobs to set initial positions, or use the controls below to adjust parameters. Watch as tiny changes in initial conditions lead to dramatically different outcomes - a beautiful demonstration of chaos theory!",
        "cs.pid.title": "PID Controller",
        "cs.pid.desc": "A visual demonstration of a PID controller. Twist the <strong>TARGET</strong> knob (Red) and watch the <strong>OUTPUT</strong> knob (Black) try to follow it. The output knob simulates a physical object with weight and friction. Adjust the P, I, and D parameters to see how they affect the control loop performance.",
        "cs.fourier.title": "Fourier Series Drawing",
        "cs.fourier.desc": "<strong>Draw anything</strong> in the box below! The computer will calculate the Fourier Series (DFT) of your drawing and reconstruct it using purely rotating circles (<span class=\"variable\">epicycles</span>).",
        "cs.lorenz.title": "Lorenz Attractor",
        "cs.lorenz.desc": "The <strong>Lorenz Attractor</strong> is a set of chaotic solutions to the Lorenz system. It resembles a butterfly and is a primary example of how deterministic systems can exhibit unpredictable behavior. <strong>Drag to rotate</strong> the 3D view!",
        "cs.gol.title": "Conway's Game of Life",
        "cs.gol.desc": "The most famous \"Zero Player Game\". A set of simple rules that creates complex, life-like behaviors. <strong>Click</strong> to revive cells, or use the buttons below."
    },
    pt: {
        "title": "Stanislav<br>Simanovich",
        "nav.about": "Sobre",
        "nav.work": "Trabalho",
        "nav.education": "Educação",
        "nav.coolstuff": "Simulações Interativas",
        "nav.contact": "Contato",
        "about.title": "Sobre",
        "about.lead": "Oi! Eu sou o Stas. Tenho 20 anos e sou da Irlanda.",
        "about.p1": "Sou estudante de engenharia com grande interesse em construir sistemas e entender como hardware e software interagem em baixo nível.",
        "about.p2": "Gosto de trabalhar em projetos práticos, especialmente aqueles envolvendo sistemas embarcados, microcontroladores e resolução de problemas através de testes e iteração. Sou motivado por aprender como as coisas funcionam por dentro e aplicar a teoria em cenários do mundo real.",
        "about.p3": "Este site serve como um portfólio pessoal para documentar meus projetos, desenvolvimento e interesses enquanto continuo a construir minhas habilidades técnicas.",
        "about.p4": "Fora do trabalho técnico, gosto de me manter curioso, aprender novas ferramentas, tocar guitarra (7 cordas) e cozinhar.",
        "work.title": "Trabalho",
        "work.adi.role": "Departamento de Aplicações de Energia e Data Center",
        "work.adi.list.1": "Automação de Testes e Análise",
        "work.adi.list.2": "Esquema e Layout EDA",
        "work.adi.list.3": "Desenvolvimento de Plugins de Software EDA",
        "work.adi.list.4": "Design CAD",
        "work.conack.role": "Operário Geral",
        "work.conack.list.1": "Limpeza",
        "work.conack.list.2": "Entrega de mercadorias",
        "work.conack.list.3": "Pintura",
        "work.conack.list.4": "Encanamento",
        "work.conack.list.5": "Alvenaria",
        "edu.title": "Educação",
        "edu.ul.role": "3º Ano MEng - Engenharia Mecatrônica Digital",
        "edu.list.1": "Mecânica Estática e Dinâmica",
        "edu.list.2": "Mecânica dos Sólidos",
        "edu.list.3": "Termodinâmica",
        "edu.list.4": "Dinâmica dos Fluidos",
        "edu.list.5": "Sistemas de Controle",
        "edu.list.6": "Eletrônica",
        "edu.list.7": "Sistemas Embarcados",
        "edu.list.8": "Matemática",
        "edu.list.9": "Estatística",
        "edu.list.10": "Design CAD",
        "contact.title": "Contato",
        "credits.overlay": "Créditos",
        "maja.dedication": "Dedicado à minha amada namorada Maja",
        "maja.photo.desc": "Por tirar a foto legal.",
        "maja.return": "Voltar ao Início",
        "cs.title": "Simulações Interativas - Portfólio",
        "cs.pendulum.title": "Pêndulo Duplo Interativo",
        "cs.pendulum.desc": "Uma simulação caótica de pêndulo duplo. Arraste os pêndulos para definir posições iniciais ou use os controles abaixo para ajustar parâmetros. Veja como pequenas mudanças nas condições iniciais levam a resultados dramaticamente diferentes - uma bela demonstração da teoria do caos!",
        "cs.pid.title": "Controlador PID",
        "cs.pid.desc": "Uma demonstração visual de um controlador PID. Gire o botão <strong>ALVO</strong> (Vermelho) e observe o botão <strong>SAÍDA</strong> (Preto) tentar segui-lo. O botão de saída simula um objeto físico com peso e atrito. Ajuste os parâmetros P, I e D para ver como afetam o desempenho do loop de controle.",
        "cs.fourier.title": "Desenho de Série de Fourier",
        "cs.fourier.desc": "<strong>Desenhe qualquer coisa</strong> na caixa abaixo! O computador calculará a Série de Fourier (DFT) do seu desenho e o reconstruirá usando círculos puramente rotativos (<span class=\"variable\">epíciclos</span>).",
        "cs.lorenz.title": "Atrator de Lorenz",
        "cs.lorenz.desc": "O <strong>Atrator de Lorenz</strong> é um conjunto de soluções caóticas para o sistema de Lorenz. Assemelha-se a uma borboleta e é um exemplo primário de como sistemas determinísticos podem exibir comportamento imprevisível. <strong>Arraste para girar</strong> a visualização 3D!",
        "cs.gol.title": "Jogo da Vida de Conway",
        "cs.gol.desc": "O mais famoso \"Jogo de Zero Jogadores\". Um conjunto de regras simples que cria comportamentos complexos e semelhantes à vida. <strong>Clique</strong> para reviver células ou use os botões abaixo."
    },
    ru: {
        "title": "Станислав<br>Симанович",
        "nav.about": "Обо мне",
        "nav.work": "Работа",
        "nav.education": "Образование",
        "nav.coolstuff": "Интерактивные Симуляции",
        "nav.contact": "Контакты",
        "about.title": "Обо мне",
        "about.lead": "Привет! Я Стас. Мне 20 лет, я из Ирландии.",
        "about.p1": "Я студент-инженер, интересуюсь созданием систем и взаимодействием аппаратного и программного обеспечения на низком уровне.",
        "about.p2": "Мне нравится работать над практическими проектами, особенно связанными с встроенными системами, микроконтроллерами и решением задач через тестирование. Меня мотивирует понимание того, как вещи работают изнутри, и применение теории на практике.",
        "about.p3": "Этот сайт служит личным портфолио для документации моих проектов и интересов, пока я продолжаю развивать свои технические навыки.",
        "about.p4": "Помимо технических задач, я люблю узнавать новое, изучать инструменты, играть на гитаре (7 струн) и готовить.",
        "work.title": "Работа",
        "work.adi.role": "Отдел приложений для центров обработки данных и энергетики",
        "work.adi.list.1": "Автоматизация тестирования и анализ",
        "work.adi.list.2": "Схемы и макеты EDA",
        "work.adi.list.3": "Разработка плагинов для ПО EDA",
        "work.adi.list.4": "CAD дизайн",
        "work.conack.role": "Разнорабочий",
        "work.conack.list.1": "Уборка",
        "work.conack.list.2": "Доставка товаров",
        "work.conack.list.3": "Покраска",
        "work.conack.list.4": "Сантехника",
        "work.conack.list.5": "Кладка кирпича",
        "edu.title": "Образование",
        "edu.ul.role": "3-й курс MEng - Цифровая Мехатроника",
        "edu.list.1": "Статическая и динамическая механика",
        "edu.list.2": "Механика твердого тела",
        "edu.list.3": "Термодинамика",
        "edu.list.4": "Гидродинамика",
        "edu.list.5": "Системы управления",
        "edu.list.6": "Электроника",
        "edu.list.7": "Встроенные системы",
        "edu.list.8": "Математика",
        "edu.list.9": "Статистика",
        "edu.list.10": "CAD дизайн",
        "contact.title": "Контакты",
        "credits.overlay": "Кредиты",
        "maja.dedication": "Посвящается моей любимой девушке Майе",
        "maja.photo.desc": "За классное фото.",
        "maja.return": "Вернуться на главную",
        "cs.title": "Интерактивные Симуляции - Портфолио",
        "cs.pendulum.title": "Интерактивный двойной маятник",
        "cs.pendulum.desc": "Хаотическая симуляция двойного маятника. Перетаскивайте грузы, чтобы задать начальные позиции, или используйте элементы управления ниже. Изменения в начальных условиях приводят к совершенно разным результатам — прекрасная демонстрация теории хаоса!",
        "cs.pid.title": "PID-регулятор",
        "cs.pid.desc": "Визуальная демонстрация PID-регулятора. Поверните ручку <strong>ЦЕЛЬ</strong> (Красная) и наблюдайте, как ручка <strong>ВЫХОД</strong> (Черная) пытается следовать за ней. Выходная ручка имитирует физический объект с весом и трением. Настройте параметры P, I и D, чтобы увидеть, как они влияют на производительность.",
        "cs.fourier.title": "Рисование рядами Фурье",
        "cs.fourier.desc": "<strong>Нарисуйте что угодно</strong> в поле ниже! Компьютер рассчитает ряд Фурье (DFT) вашего рисунка и восстановит его с помощью вращающихся кругов (<span class=\"variable\">эпициклов</span>).",
        "cs.lorenz.title": "Аттрактор Лоренца",
        "cs.lorenz.desc": "<strong>Аттрактор Лоренца</strong> — это набор хаотических решений системы Лоренца. Он напоминает бабочку и является ярким примером того, как детерминированные системы могут вести себя непредсказуемо. <strong>Перетащите, чтобы вращать</strong> 3D-вид!",
        "cs.gol.title": "Игра «Жизнь» Конвея",
        "cs.gol.desc": "Самая известная игра без игроков. Набор простых правил создает сложное поведение, похожее на жизнь. <strong>Кликните</strong>, чтобы оживить клетки, или используйте кнопки ниже."
    },
    es: {
        "title": "Stanislav<br>Simanovich",
        "nav.about": "Sobre mí",
        "nav.work": "Trabajo",
        "nav.education": "Educación",
        "nav.coolstuff": "Simulaciones Interactivas",
        "nav.contact": "Contacto",
        "about.title": "Sobre mí",
        "about.lead": "¡Hola! Soy Stas. Tengo 20 años y soy de Irlanda.",
        "about.p1": "Soy estudiante de ingeniería con un fuerte interés en construir sistemas y entender cómo el hardware y el software interactúan a bajo nivel.",
        "about.p2": "Disfruto trabajando en proyectos prácticos, particularmente aquellos que involucran sistemas embebidos, microcontroladores y resolución de problemas a través de pruebas e iteración. Me motiva aprender cómo funcionan las cosas por dentro y aplicar la teoría a escenarios del mundo real.",
        "about.p3": "Este sitio web sirve como un portafolio personal para documentar mis proyectos, desarrollo e intereses a medida que continúo construyendo mis habilidades técnicas.",
        "about.p4": "Fuera del trabajo técnico, disfruto manteniendo la curiosidad, aprendiendo nuevas herramientas, tocando la guitarra (7 cuerdas) y cocinando.",
        "work.title": "Trabajo",
        "work.adi.role": "Departamento de Aplicaciones de Energía y Centros de Datos",
        "work.adi.list.1": "Automatización de Pruebas y Análisis",
        "work.adi.list.2": "Esquema y Diseño EDA",
        "work.adi.list.3": "Desarrollo de Plugins de Software EDA",
        "work.adi.list.4": "Diseño CAD",
        "work.conack.role": "Operario General",
        "work.conack.list.1": "Limpieza",
        "work.conack.list.2": "Entrega de mercancías",
        "work.conack.list.3": "Pintura",
        "work.conack.list.4": "Fontanería",
        "work.conack.list.5": "Albañilería",
        "edu.title": "Educación",
        "edu.ul.role": "3er Año MEng - Ingeniería Mecatrónica Digital",
        "edu.list.1": "Mecánica Estática y Dinámica",
        "edu.list.2": "Mecánica de Sólidos",
        "edu.list.3": "Termodinámica",
        "edu.list.4": "Dinámica de Fluidos",
        "edu.list.5": "Sistemas de Control",
        "edu.list.6": "Electrónica",
        "edu.list.7": "Sistemas Embebidos",
        "edu.list.8": "Matemáticas",
        "edu.list.9": "Estadística",
        "edu.list.10": "Diseño CAD",
        "contact.title": "Contacto",
        "credits.overlay": "Créditos",
        "maja.dedication": "Dedicado a mi encantadora novia Maja",
        "maja.photo.desc": "Por tomar la foto genial.",
        "maja.return": "Volver al Inicio",
        "cs.title": "Simulaciones Interactivas - Portafolio",
        "cs.pendulum.title": "Péndulo Doble Interactivo",
        "cs.pendulum.desc": "Una simulación caótica de péndulo doble. Arrastra los péndulos para establecer posiciones iniciales o usa los controles de abajo para ajustar parámetros. Mira cómo pequeños cambios en las condiciones iniciales llevan a resultados dramáticamente diferentes - ¡una hermosa demostración de la teoría del caos!",
        "cs.pid.title": "Controlador PID",
        "cs.pid.desc": "Una demostración visual de un controlador PID. Gira la perilla <strong>OBJETIVO</strong> (Roja) y observa la perilla <strong>SALIDA</strong> (Negra) intentar seguirla. La perilla de salida simula un objeto físico con peso y fricción. Ajusta los parámetros P, I y D para ver cómo afectan el rendimiento del bucle de control.",
        "cs.fourier.title": "Dibujo de Serie de Fourier",
        "cs.fourier.desc": "<strong>¡Dibuja cualquier cosa</strong> en el cuadro de abajo! La computadora calculará la Serie de Fourier (DFT) de tu dibujo y lo reconstruirá usando círculos puramente giratorios (<span class=\"variable\">epiciclos</span>).",
        "cs.lorenz.title": "Atractor de Lorenz",
        "cs.lorenz.desc": "El <strong>Atractor de Lorenz</strong> es un conjunto de soluciones caóticas para el sistema de Lorenz. Se asemeja a una mariposa y es un ejemplo principal de cómo los sistemas deterministas pueden exhibir un comportamiento impredecible. <strong>¡Arrastra para rotar</strong> la vista 3D!",
        "cs.gol.title": "Juego de la Vida de Conway",
        "cs.gol.desc": "El \"Juego de Cero Jugadores\" más famoso. Un conjunto de reglas simples que crea comportamientos complejos y similares a la vida. <strong>Haz clic</strong> para revivir células o usa los botones de abajo."
    }
};

function changeLanguage(lang) {
    // 1. Update text content
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            element.innerHTML = translations[lang][key]; // Use innerHTML to parse <br> and <strong>
        }
    });

    // 2. Persist preference
    localStorage.setItem('preferredLanguage', lang);

    // 3. Update active flag
    document.querySelectorAll('.flag-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.lang === lang) {
            btn.classList.add('active');
        }
    });
}

// Init
document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('preferredLanguage') || 'en';
    changeLanguage(savedLang);

    // Add event listeners to buttons
    document.querySelectorAll('.flag-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            changeLanguage(btn.dataset.lang);
        });
    });
});
