const translations = {
    en: {
        "title": "Stanislav<br>Simanovich",
        "nav.about": "About",
        "nav.work": "Work",
        "nav.education": "Education",
        "nav.coolstuff": "Interactive Simulations",
        "nav.contact": "Contact",
        "about.title": "About",
        "about.lead": "Hi! I'm Stas. I'm a 20 year old from Ireland.",
        "about.p1": "I’m an engineering student with a strong interest in building systems and understanding how hardware and software interact at a low level.",
        "about.p2": "I enjoy working on hands-on projects, particularly those involving embedded systems, microcontrollers, and problem-solving through testing and iteration. I’m motivated by learning how things work under the hood and applying theory to real-world scenarios.",
        "about.p3": "This website serves as a personal portfolio to document my projects, development, and interests as I continue to build my technical skills.",
        "about.p4": "Outside of technical work, I enjoy staying curious, learning new tools, playing the guitar (7 string) and cooking.",
        "work.title": "Work",
        "work.adi.role": "Data Center and Energy Applications Department",
        "work.adi.list.1": "Test Automation and Analysis",
        "work.adi.list.2": "EDA Schematic and Layout",
        "work.adi.list.3": "EDA Software Plugin Development",
        "work.adi.list.4": "CAD Design",
        "work.conack.role": "General Operative",
        "work.conack.list.1": "Housekeeping",
        "work.conack.list.2": "Delivery of goods",
        "work.conack.list.3": "Painting",
        "work.conack.list.4": "Plumbing",
        "work.conack.list.5": "Bricklaying",
        "edu.title": "Education",
        "edu.ul.role": "3° Year MEng - Digital Mechatronics Engineering",
        "edu.list.1": "Static and Dynamic Mechanics",
        "edu.list.2": "Mechanics of Solids",
        "edu.list.3": "Thermal Dynamics",
        "edu.list.4": "Fluid Dynamics",
        "edu.list.5": "Control Systems",
        "edu.list.6": "Electronics",
        "edu.list.7": "Embedded Systems",
        "edu.list.8": "Mathematics",
        "edu.list.9": "Statistics",
        "edu.list.10": "CAD Design",
        "contact.title": "Contact",
        "credits.overlay": "Credits",
        "maja.dedication": "Dedicated to my lovely girlfriend Maja",
        "maja.photo.desc": "For taking the cool photo.",
        "maja.return": "Return Home",
        "cs.title": "Interactive Simulations - Portfolio",
        "cs.pendulum.title": "Interactive Double Pendulum",
        "cs.pendulum.desc": "A chaotic double pendulum simulation. Drag the pendulum bobs to set initial positions, or use the controls below to adjust parameters. Watch as tiny changes in initial conditions lead to dramatically different outcomes - a beautiful demonstration of chaos theory!",
        "cs.pid.title": "PID Controller",
        "cs.pid.desc": "A visual demonstration of a PID controller. Twist the <strong>TARGET</strong> knob (Red) and watch the <strong>OUTPUT</strong> knob (Black) try to follow it. The output knob simulates a physical object with weight and friction. Adjust the P, I, and D parameters to see how they affect the control loop performance.",
        "cs.fourier.title": "Fourier Series Drawing",
        "cs.fourier.desc": "<strong>Draw anything</strong> in the box below! The computer will calculate the Fourier Series (DFT) of your drawing and reconstruct it using purely rotating circles (<span class=\"variable\">epicycles</span>).",
        "cs.lorenz.title": "Lorenz Attractor",
        "cs.lorenz.desc": "The <strong>Lorenz Attractor</strong> is a set of chaotic solutions to the Lorenz system. It resembles a butterfly and is a primary example of how deterministic systems can exhibit unpredictable behavior. <strong>Drag to rotate</strong> the 3D view!",
        "cs.gol.title": "Conway's Game of Life",
        "cs.gol.desc": "The most famous \"Zero Player Game\". A set of simple rules that creates complex, life-like behaviors. <strong>Click</strong> to revive cells, or use the buttons below."
    },
    pt: {
        "title": "Stanislav<br>Simanovich",
        "nav.about": "Sobre",
        "nav.work": "Trabalho",
        "nav.education": "Educação",
        "nav.coolstuff": "Simulações Interativas",
        "nav.contact": "Contato",
        "about.title": "Sobre",
        "about.lead": "Oi! Eu sou o Stas. Tenho 20 anos e sou da Irlanda.",
        "about.p1": "Sou estudante de engenharia com grande interesse em construir sistemas e entender como hardware e software interagem em baixo nível.",
        "about.p2": "Gosto de trabalhar em projetos práticos, especialmente aqueles envolvendo sistemas embarcados, microcontroladores e resolução de problemas através de testes e iteração. Sou motivado por aprender como as coisas funcionam por dentro e aplicar a teoria em cenários do mundo real.",
        "about.p3": "Este site serve como um portfólio pessoal para documentar meus projetos, desenvolvimento e interesses enquanto continuo a construir minhas habilidades técnicas.",
        "about.p4": "Fora do trabalho técnico, gosto de me manter curioso, aprender novas ferramentas, tocar guitarra (7 cordas) e cozinhar.",
        "work.title": "Trabalho",
        "work.adi.role": "Departamento de Aplicações de Energia e Data Center",
        "work.adi.list.1": "Automação de Testes e Análise",
        "work.adi.list.2": "Esquema e Layout EDA",
        "work.adi.list.3": "Desenvolvimento de Plugins de Software EDA",
        "work.adi.list.4": "Design CAD",
        "work.conack.role": "Operário Geral",
        "work.conack.list.1": "Limpeza",
        "work.conack.list.2": "Entrega de mercadorias",
        "work.conack.list.3": "Pintura",
        "work.conack.list.4": "Encanamento",
        "work.conack.list.5": "Alvenaria",
        "edu.title": "Educação",
        "edu.ul.role": "3º Ano MEng - Engenharia Mecatrônica Digital",
        "edu.list.1": "Mecânica Estática e Dinâmica",
        "edu.list.2": "Mecânica dos Sólidos",
        "edu.list.3": "Termodinâmica",
        "edu.list.4": "Dinâmica dos Fluidos",
        "edu.list.5": "Sistemas de Controle",
        "edu.list.6": "Eletrônica",
        "edu.list.7": "Sistemas Embarcados",
        "edu.list.8": "Matemática",
        "edu.list.9": "Estatística",
        "edu.list.10": "Design CAD",
        "contact.title": "Contato",
        "credits.overlay": "Créditos",
        "maja.dedication": "Dedicado à minha amada namorada Maja",
        "maja.photo.desc": "Por tirar a foto legal.",
        "maja.return": "Voltar ao Início",
        "cs.title": "Simulações Interativas - Portfólio",
        "cs.pendulum.title": "Pêndulo Duplo Interativo",
        "cs.pendulum.desc": "Uma simulação caótica de pêndulo duplo. Arraste os pêndulos para definir posições iniciais ou use os controles abaixo para ajustar parâmetros. Veja como pequenas mudanças nas condições iniciais levam a resultados dramaticamente diferentes - uma bela demonstração da teoria do caos!",
        "cs.pid.title": "Controlador PID",
        "cs.pid.desc": "Uma demonstração visual de um controlador PID. Gire o botão <strong>ALVO</strong> (Vermelho) e observe o botão <strong>SAÍDA</strong> (Preto) tentar segui-lo. O botão de saída simula um objeto físico com peso e atrito. Ajuste os parâmetros P, I e D para ver como afetam o desempenho do loop de controle.",
        "cs.fourier.title": "Desenho de Série de Fourier",
        "cs.fourier.desc": "<strong>Desenhe qualquer coisa</strong> na caixa abaixo! O computador calculará a Série de Fourier (DFT) do seu desenho e o reconstruirá usando círculos puramente rotativos (<span class=\"variable\">epíciclos</span>).",
        "cs.lorenz.title": "Atrator de Lorenz",
        "cs.lorenz.desc": "O <strong>Atrator de Lorenz</strong> é um conjunto de soluções caóticas para o sistema de Lorenz. Assemelha-se a uma borboleta e é um exemplo primário de como sistemas determinísticos podem exibir comportamento imprevisível. <strong>Arraste para girar</strong> a visualização 3D!",
        "cs.gol.title": "Jogo da Vida de Conway",
        "cs.gol.desc": "O mais famoso \"Jogo de Zero Jogadores\". Um conjunto de regras simples que cria comportamentos complexos e semelhantes à vida. <strong>Clique</strong> para reviver células ou use os botões abaixo."
    },
    be: {
        "title": "Станіслаў<br>Сімановіч",
        "nav.about": "Пра мяне",
        "nav.work": "Праца",
        "nav.education": "Адукацыя",
        "nav.coolstuff": "Інтэрактыўныя Сімуляцыі",
        "nav.contact": "Кантакты",
        "about.title": "Пра мяне",
        "about.lead": "Прывітанне! Я Стас. Мне 20 гадоў, я з Ірландыі.",
        "about.p1": "Я студэнт-інжынер, які цікавіцца стварэннем сістэм і разуменнем таго, як апаратнае і праграмнае забеспячэнне ўзаемадзейнічаюць на нізкім узроўні.",
        "about.p2": "Мне падабаецца працаваць над практычнымі праектамі, асабліва з убудаванымі сістэмамі, мікракантролерамі і рашэннем праблем праз тэставанне. Мяне матывуе разуменне таго, як усё працуе знутры, і прымяненне тэорыі на практыцы.",
        "about.p3": "Гэты сайт служыць асабістым партфоліо для дакументавання маіх праектаў і інтарэсаў, пакуль я працягваю развіваць свае тэхнічныя навыкі.",
        "about.p4": "Акрамя тэхнічнай працы, я люблю цікавіцца новым, вывучаць інструменты, іграць на гітары (7 струн) і гатаваць.",
        "work.title": "Праца",
        "work.adi.role": "Аддзел прыкладанняў для цэнтраў апрацоўкі дадзеных і энергетыкі",
        "work.adi.list.1": "Аўтаматызацыя тэсціравання і аналіз",
        "work.adi.list.2": "Схемы і макеты EDA",
        "work.adi.list.3": "Распрацоўка плагінаў для ПЗ EDA",
        "work.adi.list.4": "Дызайн CAD",
        "work.conack.role": "Разнарабочы",
        "work.conack.list.1": "Уборка",
        "work.conack.list.2": "Дастаўка тавараў",
        "work.conack.list.3": "Фарбаванне",
        "work.conack.list.4": "Сантэхніка",
        "work.conack.list.5": "Цагляны мур",
        "edu.title": "Адукацыя",
        "edu.ul.role": "3-ці курс MEng - Лічбавая Мекатроніка",
        "edu.list.1": "Статычная і дынамічная механіка",
        "edu.list.2": "Механіка цвёрдага цела",
        "edu.list.3": "Тэрмадынаміка",
        "edu.list.4": "Гідрадынаміка",
        "edu.list.5": "Сістэмы кіравання",
        "edu.list.6": "Электроніка",
        "edu.list.7": "Убудаваныя сістэмы",
        "edu.list.8": "Матэматыка",
        "edu.list.9": "Статыстыка",
        "edu.list.10": "Дызайн CAD",
        "contact.title": "Кантакты",
        "credits.overlay": "Крэдыты",
        "maja.dedication": "Прысвечана маёй цудоўнай дзяўчыне Маі",
        "maja.photo.desc": "За тое, што зрабіла класны фотаздымак.",
        "maja.return": "Вярнуцца дадому",
        "cs.title": "Інтэрактыўныя Сімуляцыі - Партфоліо",
        "cs.pendulum.title": "Інтэрактыўны двайны маятнік",
        "cs.pendulum.desc": "Хаатычная сімуляцыя двайнога маятніка. Перацягвайце грузы, каб задаць пачатковыя пазіцыі, або выкарыстоўвайце элементы кіравання ніжэй. Змены ў пачатковых умовах прыводзяць да розных вынікаў - прыгожая дэманстрацыя тэорыі хаосу!",
        "cs.pid.title": "PID-рэгулятар",
        "cs.pid.desc": "Візуальная дэманстрацыя PID-рэгулятара. Павярніце ручку <strong>MЭТА</strong> (Чырвоная) і назірайце, як ручка <strong>ВЫХАД</strong> (Чорная) спрабуе ісці за ёй. Выхадная ручка імітуе фізічны аб'ект з вагой і трэннем.",
        "cs.fourier.title": "Маляванне радам Фур'е",
        "cs.fourier.desc": "<strong>Малюйце што заўгодна</strong> ў полі ніжэй! Кампутар разлічыць рад Фур'е (DFT) вашага малюнка і адновіць яго з дапамогай кругоў, якія верцяцца (<span class=\"variable\">эпіцыклаў</span>).",
        "cs.lorenz.title": "Атрактар Лорэнца",
        "cs.lorenz.desc": "<strong>Атрактар Лорэнца</strong> - гэта набор хаатычных рашэнняў сістэмы Лорэнца. Ён нагадвае матылька і з'яўляецца прыкладам таго, як дэтэрмінаваныя сістэмы могуць паводзіць сябе непрадказальна. <strong>Перацягніце, каб павярнуць</strong> 3D-выгляд!",
        "cs.gol.title": "Гульня «Жыццё» Конвея",
        "cs.gol.desc": "Самая вядомая гульня без гульцоў. Простыя правілы ствараюць складаныя паводзіны. <strong>Клікніце</strong>, каб ажывіць клеткі, або выкарыстоўвайце кнопкі ніжэй."
    },
    es: {
        "title": "Stanislav<br>Simanovich",
        "nav.about": "Sobre mí",
        "nav.work": "Trabajo",
        "nav.education": "Educación",
        "nav.coolstuff": "Simulaciones Interactivas",
        "nav.contact": "Contacto",
        "about.title": "Sobre mí",
        "about.lead": "¡Hola! Soy Stas. Tengo 20 años y soy de Irlanda.",
        "about.p1": "Soy estudiante de ingeniería con un fuerte interés en construir sistemas y entender cómo el hardware y el software interactúan a bajo nivel.",
        "about.p2": "Disfruto trabajando en proyectos prácticos, particularmente aquellos que involucran sistemas embebidos, microcontroladores y resolución de problemas a través de pruebas e iteración. Me motiva aprender cómo funcionan las cosas por dentro y aplicar la teoría a escenarios del mundo real.",
        "about.p3": "Este sitio web sirve como un portafolio personal para documentar mis proyectos, desarrollo e intereses a medida que continúo construyendo mis habilidades técnicas.",
        "about.p4": "Fuera del trabajo técnico, disfruto manteniendo la curiosidad, aprendiendo nuevas herramientas, tocando la guitarra (7 cuerdas) y cocinando.",
        "work.title": "Trabajo",
        "work.adi.role": "Departamento de Aplicaciones de Energía y Centros de Datos",
        "work.adi.list.1": "Automatización de Pruebas y Análisis",
        "work.adi.list.2": "Esquema y Diseño EDA",
        "work.adi.list.3": "Desarrollo de Plugins de Software EDA",
        "work.adi.list.4": "Diseño CAD",
        "work.conack.role": "Operario General",
        "work.conack.list.1": "Limpieza",
        "work.conack.list.2": "Entrega de mercancías",
        "work.conack.list.3": "Pintura",
        "work.conack.list.4": "Fontanería",
        "work.conack.list.5": "Albañilería",
        "edu.title": "Educación",
        "edu.ul.role": "3er Año MEng - Ingeniería Mecatrónica Digital",
        "edu.list.1": "Mecánica Estática y Dinámica",
        "edu.list.2": "Mecánica de Sólidos",
        "edu.list.3": "Termodinámica",
        "edu.list.4": "Dinámica de Fluidos",
        "edu.list.5": "Sistemas de Control",
        "edu.list.6": "Electrónica",
        "edu.list.7": "Sistemas Embebidos",
        "edu.list.8": "Matemáticas",
        "edu.list.9": "Estadística",
        "edu.list.10": "Diseño CAD",
        "contact.title": "Contacto",
        "credits.overlay": "Créditos",
        "maja.dedication": "Dedicado a mi encantadora novia Maja",
        "maja.photo.desc": "Por tomar la foto genial.",
        "maja.return": "Volver al Inicio",
        "cs.title": "Simulaciones Interactivas - Portafolio",
        "cs.pendulum.title": "Péndulo Doble Interactivo",
        "cs.pendulum.desc": "Una simulación caótica de péndulo doble. Arrastra los péndulos para establecer posiciones iniciales o usa los controles de abajo para ajustar parámetros. Mira cómo pequeños cambios en las condiciones iniciales llevan a resultados dramáticamente diferentes - ¡una hermosa demostración de la teoría del caos!",
        "cs.pid.title": "Controlador PID",
        "cs.pid.desc": "Una demostración visual de un controlador PID. Gira la perilla <strong>OBJETIVO</strong> (Roja) y observa la perilla <strong>SALIDA</strong> (Negra) intentar seguirla. La perilla de salida simula un objeto físico con peso y fricción. Ajusta los parámetros P, I y D para ver cómo afectan el rendimiento del bucle de control.",
        "cs.fourier.title": "Dibujo de Serie de Fourier",
        "cs.fourier.desc": "<strong>¡Dibuja cualquier cosa</strong> en el cuadro de abajo! La computadora calculará la Serie de Fourier (DFT) de tu dibujo y lo reconstruirá usando círculos puramente giratorios (<span class=\"variable\">epiciclos</span>).",
        "cs.lorenz.title": "Atractor de Lorenz",
        "cs.lorenz.desc": "El <strong>Atractor de Lorenz</strong> es un conjunto de soluciones caóticas para el sistema de Lorenz. Se asemeja a una mariposa y es un ejemplo principal de cómo los sistemas deterministas pueden exhibir un comportamiento impredecible. <strong>¡Arrastra para rotar</strong> la vista 3D!",
        "cs.gol.title": "Juego de la Vida de Conway",
        "cs.gol.desc": "El \"Juego de Cero Jugadores\" más famoso. Un conjunto de reglas simples que crea comportamientos complejos y similares a la vida. <strong>Haz clic</strong> para revivir células o usa los botones de abajo."
    }
};

function changeLanguage(lang) {
    // 1. Update text content
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            element.innerHTML = translations[lang][key]; // Use innerHTML to parse <br> and <strong>
        }
    });

    // 2. Persist preference
    localStorage.setItem('preferredLanguage', lang);

    // 3. Update active flag
    document.querySelectorAll('.flag-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.lang === lang) {
            btn.classList.add('active');
        }
    });
}

// Init
document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('preferredLanguage') || 'en';
    changeLanguage(savedLang);

    // Add event listeners to buttons
    document.querySelectorAll('.flag-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            changeLanguage(btn.dataset.lang);
        });
    });
});
